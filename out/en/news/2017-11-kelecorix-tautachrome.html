<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="Haskell, Hardware, VHDL, SDR, SDN, Software-Defined Radio, Software Defined Radio, Software-Defined Networks, Software Defined Networks, AEC, Automatic Environment Control, CED, Computational Electromagnetics, SDA, Software-Defined Antenna, Software Defined Antenn">
  <meta name="description" content="Kelecorix applies cutting edge mathematics and computer science to solve difficult technological problems. Provide practical solutions to client needs.">
  <meta name="author" content="Sergey Bushnyak">
  <meta name="copyright" content="Kelecorix, LLC">
  <meta name="robots" content="index, nofollow">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="revisit-after" content="5 days">
  <link href="../../img/logo-gem-xs.png" rel="icon" type="image/png">
  <title>Kelecorix, Inc</title>
  <link href="../../css/bootstrap.css" rel="stylesheet">
  <link href="../../css/leaflet.css" rel="stylesheet">
  <link href="../../css/kelecorix.css" rel="stylesheet">
  <link href="../../css/app.css" rel="stylesheet">
  <link href="../../css/docs.css" rel="stylesheet">
  <link href="../../css/pandoc.css" rel="stylesheet">
  <script src="../../js/leaflet.js"></script>
  <script src="../../js/aa-jquery.js" type="text/javascript"></script>
  <script src="../../js/bootstrap.min.js"></script>
  <script charset="utf-8" src="./js/jquery.jcarousel.min.js" type="text/javascript"></script>
  <script src="../../js/unslider.min.js"></script>
</head>

<body>
  <header class="smallerh">
    <nav class="navbar navbar-default navbar-fixed-top smaller">
      <div class="container" id="nav-container">
        <div class="container-fluid">
          <div class="navbar-header smaller">
            <button class="navbar-toggle" data-target="#topmenu" data-toggle="collapse" type="button">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand smaller" href="../index.html"><img class="smaller" id="logo" src="../../img/logo.png"></a>
            <span class="navbar-brand smaller" id="name">Kelecorix</span>
          </div>
          <div class="collapse navbar-collapse" id="topmenu">
            <ul class="nav navbar-nav navbar-right smaller">
              <li>
                <a data-placement="bottom" data-toggle="tooltip" href="../technology.html" rel="tooltip" title="Our Technology">
                  <div class="el-menu2 hidden-sm hidden-md">
                    Technology
                  </div>
                  <i class="fa fa-terminal visible-sm visible-md"></i>
                </a>
              </li>
              <li>
                <a data-placement="bottom" data-toggle="tooltip" href="../solutions.html" rel="tooltip" title="Our Solutions">
                  <div class="el-menu2 hidden-sm hidden-md">
                    Solutions
                  </div>
                  <i class="fa fa-rocket visible-sm visible-md"></i>
                </a>
              </li>
              <li>
                <a data-placement="bottom" data-toggle="tooltip" href="../services.html" rel="tooltip" title="Our Services">
                  <div class="el-menu2 hidden-sm hidden-md">
                    Services
                  </div>
                  <i class="fa fa-rocket visible-sm visible-md"></i>
                </a>
              </li>
              <li>
                <a data-placement="bottom" data-toggle="tooltip" href="../news.html" rel="tooltip" title="Our News">
                  <div class="el-menu2 hidden-sm hidden-md">
                    News
                  </div>
                  <i class="fa fa-code visible-sm visible-md"></i>
                </a>
              </li>
              <li>
                <a data-placement="bottom" data-toggle="tooltip" href="../blog.html" rel="tooltip" title="Engineering blog">
                  <div class="el-menu2 hidden-sm hidden-md">
                    Blog
                  </div>
                  <i class="fa fa-code visible-sm visible-md"></i>
                </a>
              </li>
              <li>
                <a data-placement="bottom" data-toggle="tooltip" href="../about.html" rel="tooltip" title="About Kelecorix">
                  <div class="el-menu2 hidden-sm hidden-md">
                    About
                  </div>
                  <i class="active fa fa-map-marker visible-sm visible-md"></i>
                </a>
              </li>
            </ul>
          </div>
          <!-- /.navbar-collapse -->
        </div>
      </div>
      <!-- /.container -->
    </nav>
  </header>


  <div class="bs-docs-header" id="content">
  <div class="container">
    <h1>Embracing new opportunities</h1>
    <span class="date"><a href="#">2016-01-12</a></span>
    <span>|</span>
    <span class="author"><a href>Sergey Bushnyak</a></span>
    <span class="pull-right tags"></span>
  </div>
</div>
<div class="row">
  <div class="col-xs-3" role="complementary">
    <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix">
      <!-- toc -->
    </nav>
  </div>
  <div class="col-xs-7" role="main">
    <div class=".container-fluid">
      <div class="row">
        <artcile>
          <p><code>Aeson</code> is a nice package to work with json, but sometimes it’s tedious to write all instances for deriving from/to json with your datatapes. Especially when prototyping quickly.</p>
<p>Fortunately, we can use power of GHC generics and <code>DeriveAnyClass</code> language extension, which was introduced in latest release <a href="https://downloads.haskell.org/~ghc/7.10.1/docs/html/users_guide/release-7-10-1.html">7.10</a>, to reduce amount of work. We need to use several extensions <a href>DeriveGeneric</a> and <a href>DeriveAnyClass</a> which will lead to folowing code:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="ot">{-# LANGUAGE DeriveGeneric #-}</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="ot">{-# LANGUAGE DeriveAnyClass #-}</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">module</span> <span class="dt">JsonGenerExample</span> <span class="kw">where</span> </a>
<a class="sourceLine" id="cb1-5" data-line-number="5"></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw">import</span>           <span class="dt">Data.Aeson</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="kw">import</span>           <span class="dt">GHC.Generics</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="kw">data</span> <span class="dt">User</span> <span class="fu">=</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">  <span class="dt">User</span> {<span class="ot"> login ::</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">       ,<span class="ot"> pass  ::</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12">       } <span class="kw">deriving</span> (<span class="dt">Generic</span>, <span class="dt">FromJSON</span>, <span class="dt">ToJSON</span>)</a>
<a class="sourceLine" id="cb1-13" data-line-number="13">     </a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="kw">data</span> <span class="dt">ConnectConfig</span> <span class="fu">=</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15">  <span class="dt">ConnectConfig</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16">    {<span class="ot"> host     ::</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17">    ,<span class="ot"> port     ::</span> <span class="dt">Integer</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18">    ,<span class="ot"> db       ::</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19">    ,<span class="ot"> user     ::</span> <span class="dt">User</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20">    ,<span class="ot"> password ::</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21">    } <span class="kw">deriving</span> (<span class="dt">Generic</span>, <span class="dt">FromJSON</span>, <span class="dt">ToJSON</span>)</a></code></pre></div>
<p>, where at top we connect GHC language extensions, import <code>Generics</code> and just add to our datatypes <code>deriving (Generic, FromJSON, ToJSON)</code>. That’s it, quick and easy.</p>
<p>Earlier you could do almost the same thing just with <code>DeriveGeneric</code>, but you still needed to write simple instance.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">data</span> <span class="dt">ConnectConfig</span> <span class="fu">=</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  <span class="dt">ConnectConfig</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">    {<span class="ot"> host     ::</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">    ,<span class="ot"> port     ::</span> <span class="dt">Integer</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">    ,<span class="ot"> db       ::</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">    ,<span class="ot"> user     ::</span> <span class="dt">User</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    ,<span class="ot"> password ::</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">    } <span class="kw">deriving</span> (<span class="dt">Generic</span>)</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="kw">instance</span> <span class="dt">FromJSON</span> <span class="dt">ConnectConfig</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="kw">instance</span> <span class="dt">ToJSON</span>   <span class="dt">ConnectConfig</span></a></code></pre></div>
<p>and before that, you need to write full <code>instance</code></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">instance</span> <span class="dt">ParseJSON</span> <span class="dt">ConnectConfig</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  parseJSON <span class="fu">=</span> withObject <span class="st">&quot;connectConfig&quot;</span> <span class="fu">$</span> \o <span class="ot">-&gt;</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">    <span class="kw">do</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">      host  <span class="ot">&lt;-</span> o <span class="fu">.:</span> <span class="st">&quot;host&quot;</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">      port  <span class="ot">&lt;-</span> o <span class="fu">.:</span> <span class="st">&quot;port&quot;</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">      db    <span class="ot">&lt;-</span> o <span class="fu">.:</span> <span class="st">&quot;db&quot;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">      user  <span class="ot">&lt;-</span> o <span class="fu">.:</span> <span class="st">&quot;user&quot;</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">      pass  <span class="ot">&lt;-</span> o <span class="fu">.:</span> <span class="st">&quot;password&quot;</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">    return (<span class="dt">ConnectConfig</span> host port db user pass) </a></code></pre></div>
        </artcile>
      </div>
    </div>
  </div>
  <div class="col-xs-2">
      <div class=".container-fluid">
        <div class="row">
          <div class="col-xs-4">
          </div>
          <div class="col-xs-4">
          </div>
        </div>
    </div>
  </div>
</div>


  <div class="container" id="footer-wrap">
    <section class="container-footer">
      <footer class="footer" id="footer">
        <div class="row">
          <div class="col-lg-6 col-md-4 col-sm-6 col-xs-12">
            <p><img height="60" src="../../img/logo.png" width="60">
            </p>


            <p>Kelecorix is an R&D company that combines innovative software with data science to
              provide high-impact solutions to a clients around the world. </p>
          </div>


          <div class="col-lg-3 col-md-3 col-sm-3 col-xs-6">
            <h3>About Us</h3>


            <ul class="offices clearfix">
              <li>
                <a href="solutions.html">Solutions</a>
              </li>


              <li>
                <a href="technology.html">Technology</a>
              </li>


              <li>
                <a href="services.html">Services</a>
              </li>

            </ul>
          </div>


          <div class="col-lg-3 col-md-3 col-sm-3 col-xs-6">
            <h3>Sections</h3>


            <ul class="offices clearfix">
              <li>
                <a href="mobile.kelecorix.com">Mobile</a>
              </li>

              <li class="first">
                <a href="http://blog.kelecorix.com">Blog</a>
              </li>


              <li>
                <a href="../../careers">Careers</a>
              </li>


              <li>
                <a href="../../about">About Us</a>
              </li>
            </ul>
          </div>
        </div>

        <p class="legal"><a href="mailto:info@kelecorix.com">info@kelecorix.com</a><br>
          © 2010-2016 Kelecorix Inc., All Rights Reserved.</p>

        <div class="region region-footer">
          <section class="block block-block" id="block-block-4">
          </section>
          <!-- /.block -->
        </div>
      </footer>
  </div>
  <!-- /.container -->
  </section>
  </div>

  <script src="../../js/hoverdropdown.js" type="text/javascript"></script>
  <script src="../../js/jquery.easing.1.3.js" type="text/javascript"></script>
  <script src="../../js/jquery.mousewheel.js" type="text/javascript"></script>
  <script src="../../js/jquery.contentcarousel.js" type="text/javascript"></script>
  <script src="../../js/classie.js" type="text/javascript"></script>
  <!--<script src="/js/custom.js"                 type='text/javascript'></script>-->

  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-56087124-5', 'auto');
    ga('send', 'pageview');
  </script>
</body>

</html>